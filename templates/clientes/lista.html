{% extends "base.html" %}
{% block title %}Clientes{% endblock %}

{% block content %}
<div class="page">

  <style>
    /* Responsividade apenas para telas pequenas */
    @media (max-width: 640px) {
      .wrapper-table-mobile {
        width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }
      .wrapper-table-mobile table {
        min-width: 650px;
      }
    }
  </style>

  <div class="page-header" style="display:flex; justify-content:space-between; align-items:center;">
    <h1>Clientes</h1>
    <a href="{{ url_for('clientes.novo') }}" class="btn-primary">Novo Cliente</a>
  </div>

  <div class="card" style="width:100%; max-width:100%; padding:0;">

    <!-- WRAPPER MOBILE -->
    <div class="wrapper-table-mobile">

      <table class="table" style="width:100%; border-collapse: collapse;">
        <thead>
          <tr>
            <th style="padding:14px 20px;">Tipo</th>
            <th style="padding:14px 20px;">Nome</th>
            <th style="padding:14px 20px;">CPF/CNPJ</th>
            <th style="padding:14px 20px;">Status</th>
            <th style="padding:14px 20px;">Ações</th>
          </tr>
        </thead>

        <tbody>
          {% for c in clientes %}
          <tr style="border-top:1px solid rgba(148,163,184,0.18);">
            
            <td style="padding:14px 20px;">{{ c.tipo }}</td>
            <td style="padding:14px 20px;">{{ c.nome }}</td>
            <td style="padding:14px 20px;">{{ c.cpf_cnpj }}</td>

            <td style="padding:14px 20px;">
              {% if c.ativo %}
                <span class="chip"
                  style="background:rgba(34,197,94,0.15); border:1px solid rgba(34,197,94,0.4); color:#22c55e;">
                  Ativo
                </span>
              {% else %}
                <span class="chip"
                  style="background:rgba(239,68,68,0.15); border:1px solid rgba(239,68,68,0.4); color:#ef4444;">
                  Inativo
                </span>
              {% endif %}
            </td>

            <td style="padding:14px 20px; display:flex; gap:12px; align-items:center;">

              <a href="{{ url_for('clientes.editar', id=c.id) }}" class="btn-ghost">Editar</a>

              {% if c.ativo %}
                <a href="{{ url_for('clientes.desativar', id=c.id) }}" class="btn-ghost">Desativar</a>
              {% else %}
                <a href="{{ url_for('clientes.ativar', id=c.id) }}" class="btn-ghost">Ativar</a>
              {% endif %}

              <form action="{{ url_for('clientes.excluir', id=c.id) }}" method="POST"
                    onsubmit="return confirm('Tem certeza que deseja excluir DEFINITIVAMENTE este cliente?');">
                <button type="submit" class="btn-ghost" style="color:#ef4444;">Excluir</button>
              </form>

            </td>
          </tr>
          {% endfor %}
        </tbody>

      </table>

    </div> <!-- wrapper -->

  </div>

</div>
{% endblock %}
