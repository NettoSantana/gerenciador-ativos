{% extends "base.html" %}
{% block title %}Painel do Cliente{% endblock %}

{% block content %}
<div class="page">

  <div class="page-header">
    <div>
      <h1>Painel do Cliente</h1>
      <p style="margin:4px 0 0; color:#94a3b8;">
        Bem-vindo, {{ cliente.nome }}. Aqui você acompanha seus ativos monitorados.
      </p>
    </div>
  </div>

  <div class="card" style="padding:16px; margin-bottom:18px;">
    <p style="margin:0; color:#94a3b8;">
      Você possui <strong>{{ qtd_ativos }}</strong> ativo(s) vinculado(s) a esta conta.
      Clique em um deles para abrir o painel técnico.
    </p>
  </div>

  {% if ativos %}
    <div class="card" style="padding:0;">
      <table class="table" style="width:100%; border-collapse:collapse;">
        <thead>
          <tr>
            <th style="padding:12px 18px; text-align:left;">Ativo</th>
            <th style="padding:12px 18px; text-align:left;">Categoria</th>
            <th style="padding:12px 18px; text-align:left;">Status</th>
            <th style="padding:12px 18px; text-align:right;">Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for a in ativos %}
          <tr style="border-top:1px solid rgba(148,163,184,0.18);">
            <td style="padding:12px 18px;">
              <strong>{{ a.nome }}</strong><br>
              <span style="color:#94a3b8; font-size:0.85rem;">
                {{ a.modelo or '' }}
              </span>
            </td>
            <td style="padding:12px 18px;">
              {{ a.categoria or '-' }}
            </td>
            <td style="padding:12px 18px;">
              {% if a.status_operacional == 'Operando' %}
                <span class="chip"
                  style="background:rgba(34,197,94,0.15); border:1px solid rgba(34,197,94,0.4); color:#22c55e;">
                  Operando
                </span>
              {% elif a.status_operacional == 'Parado' %}
                <span class="chip"
                  style="background:rgba(249,115,22,0.15); border:1px solid rgba(249,115,22,0.4); color:#f97316;">
                  Parado
                </span>
              {% else %}
                <span class="chip"
                  style="background:rgba(148,163,184,0.15); border:1px solid rgba(148,163,184,0.4); color:#e5e7eb;">
                  {{ a.status_operacional or '—' }}
                </span>
              {% endif %}
            </td>
            <td style="padding:12px 18px; text-align:right;">
              <a href="{{ url_for('portal.painel_ativo_cliente', ativo_id=a.id) }}"
                 class="btn-ghost"
                 style="white-space:nowrap;">
                Abrir painel
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="card" style="padding:16px;">
      <p style="margin:0; color:#94a3b8;">
        Nenhum ativo vinculado a este cliente ainda.
      </p>
    </div>
  {% endif %}

</div>
{% endblock %}
