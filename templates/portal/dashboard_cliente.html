{% extends "base.html" %}
{% block title %}Painel do Cliente{% endblock %}

{% block content %}
<div class="page">

  <div class="page-header">
    <div>
      <h1>Painel do Cliente</h1>
      <p style="margin:4px 0 0; color:#94a3b8;">
        Bem-vindo, {{ cliente.nome }}. Aqui você acompanha seus ativos monitorados.
      </p>
    </div>
  </div>

  <div class="card" style="padding:16px; margin-bottom:18px;">
    <p style="margin:0; color:#94a3b8;">
      Você possui <strong>{{ qtd_ativos }}</strong> ativo(s) vinculado(s) a esta conta.
      Clique em um deles para abrir o painel técnico.
    </p>
  </div>

  {% if ativos %}
    <div class="card" style="padding:0;">

      <!-- Cabeçalho das colunas -->
      <div style="
        display:flex;
        padding:12px 18px;
        font-size:0.85rem;
        font-weight:600;
        color:#cbd5f5;
        border-bottom:1px solid rgba(148,163,184,0.25);
      ">
        <div style="flex:3;">Ativo</div>
        <div style="flex:2;">Categoria</div>
        <div style="flex:2;">Status</div>
        <div style="flex:2; text-align:right;">Ações</div>
      </div>

      <!-- Linhas -->
      {% for a in ativos %}
      <div style="
        display:flex;
        align-items:center;
        padding:12px 18px;
        border-top:1px solid rgba(148,163,184,0.18);
      ">
        <!-- Ativo -->
        <div style="flex:3;">
          <strong>{{ a.nome }}</strong><br>
          <span style="color:#94a3b8; font-size:0.85rem;">
            {{ a.modelo or '' }}
          </span>
        </div>

        <!-- Categoria -->
        <div style="flex:2;">
          {{ a.categoria or '-' }}
        </div>

        <!-- Status -->
        <div style="flex:2;">
          {% if a.status_operacional == 'Operando' %}
            <span class="chip"
              style="background:rgba(34,197,94,0.15); border:1px solid rgba(34,197,94,0.4); color:#22c55e;">
              Operando
            </span>
          {% elif a.status_operacional == 'Parado' %}
            <span class="chip"
              style="background:rgba(249,115,22,0.15); border:1px solid rgba(249,115,22,0.4); color:#f97316;">
              Parado
            </span>
          {% else %}
            <span class="chip"
              style="background:rgba(148,163,184,0.15); border:1px solid rgba(148,163,184,0.4); color:#e5e7eb;">
              {{ a.status_operacional or '—' }}
            </span>
          {% endif %}
        </div>

        <!-- Ações -->
        <div style="flex:2; text-align:right;">
          <a href="{{ url_for('portal.painel_ativo_cliente', ativo_id=a.id) }}"
             class="btn-ghost"
             style="white-space:nowrap; padding-inline:18px;">
            Abrir painel
          </a>
        </div>
      </div>
      {% endfor %}

    </div>
  {% else %}
    <div class="card" style="padding:16px;">
      <p style="margin:0; color:#94a3b8;">
        Nenhum ativo vinculado a este cliente ainda.
      </p>
    </div>
  {% endif %}

</div>
{% endblock %}
