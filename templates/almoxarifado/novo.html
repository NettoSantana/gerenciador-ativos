{% extends "base.html" %}
{% block title %}Novo item — Almoxarifado{% endblock %}

{% block content %}
<div class="page" style="max-width:920px;">

  <div class="page-header" style="display:flex; justify-content:space-between; align-items:center;">
    <h1>Novo item</h1>
    <a href="{{ url_for('almoxarifado.index') }}" class="btn-ghost">Voltar</a>
  </div>

  <div class="card">
    <form method="POST" action="{{ url_for('almoxarifado.novo') }}">

      <div style="display:grid; grid-template-columns:1fr 1fr; gap:14px;">

        <div>
          <label>Nome *</label>
          <input name="nome" class="input" placeholder="Ex: Óleo 2T" required>
        </div>

        <div>
          <label>Unidade *</label>
no          <input name="unidade" class="input" placeholder="Ex: litro, peça, metro, kg" required>
        </div>

        <div>
          <label>Categoria</label>
          <input name="categoria" class="input" placeholder="Ex: Lubrificantes (opcional)">
        </div>

        <!-- ESTOQUE COM + / - -->
        <div>
          <label>Estoque inicial</label>

          <div style="display:flex; align-items:center; gap:8px;">
            <button type="button" class="btn-ghost" onclick="alterarEstoque(-1)">−</button>

            <input
              id="estoque"
              name="estoque_atual"
              class="input"
              value="0"
              inputmode="decimal"
              style="text-align:center;"
            >

            <button type="button" class="btn-ghost" onclick="alterarEstoque(1)">+</button>
          </div>
        </div>

      </div>

      <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:18px;">
        <a href="{{ url_for('almoxarifado.index') }}" class="btn-ghost">Cancelar</a>
        <button type="submit" class="btn-primary">Salvar</button>
      </div>

    </form>
  </div>

</div>

<script>
  function alterarEstoque(delta){
    const input = document.getElementById("estoque");
    let valor = parseFloat(input.value.replace(",", ".")) || 0;
    valor = valor + delta;
    if (valor < 0) valor = 0;
    input.value = valor.toFixed(0);
  }
</script>
{% endblock %}
