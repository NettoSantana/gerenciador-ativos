{% extends "base.html" %}
{% block title %}Histórico de Consumo — {{ ativo.nome }}{% endblock %}

{% block content %}
<div class="page">

  <div style="display:flex;justify-content:space-between;align-items:center;">
    <div>
      <h1>Histórico de Consumo</h1>
      <p class="muted">Ativo: {{ ativo.nome }}</p>
    </div>
    <a href="/ativos/{{ ativo.id }}/painel" class="btn-ghost">← Voltar ao painel</a>
  </div>

  <!-- FILTRO -->
  <form method="get" style="margin:20px 0;display:flex;gap:12px;flex-wrap:wrap;">
    <input type="date" name="inicio" value="{{ request.args.get('inicio','') }}">
    <input type="date" name="fim" value="{{ request.args.get('fim','') }}">
    <button class="btn-primary" type="submit">Buscar</button>
  </form>

  <!-- TABELA FULL WIDTH -->
  <div class="card" style="width:100%;">
    <table class="table">
      <thead>
        <tr>
          <th>Data</th>
          <th>Horas de motor</th>
          <th>Consumo médio (L/h)</th>
          <th>Consumo total (L)</th>
        </tr>
      </thead>
      <tbody>
        {% for r in registros %}
        <tr>
          <td>{{ r.data_referencia.strftime('%d/%m/%Y') }}</td>
          <td>{{ r.horas_motor }}</td>
          <td>{{ r.consumo_lph }}</td>
          <td>{{ r.consumo_total }}</td>
        </tr>
        {% else %}
        <tr>
          <td colspan="4">Nenhum registro encontrado</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}
